# LS-BOT

## 概要
公式Webサイトに設置するゲーム問い合わせBotを実装する


## 技術要件

### フロントエンド
- React
- 状態維持管理が必要な場合：Jotai
- TypeScript
- Tailwind CSS
- Vite

- BotのUIデザインは四角形、フラットデザイン。メインカラーに#1428FFを利用する

## バックエンド
- Python
- 実行環境：Vercel
- FastAPI

ローカル実行環境：Docker

## 機能仕様

- [公式サイト](https://idolypride.jp)のブラウザ画面右下に常住するチャットBot
  - アイコンをクリックしたらチャット画面が開く
- ユーザーとのやり取りはチャットのみ
- 最初に質問のカテゴリーを選べるようにする。
  - キャラクター
  - ライブイベント
  - グッズ
  - 楽曲
  - 生放送
  - その他
- [公式サイト](https://idolypride.jp)のテキストデータ、収集可能な画像データを情報源とする。
  - スクレイピングを利用する
- モデルはgpt-4o、RAGを使用する。
  - ベクトルDBやRAGの実装に指定はなし。一般的によく使われる手法で


## スクレイピングについて
クロール範囲を以下URLのページに制限する。
- `/character/kana`
- `/character/ai-komiyama`
- `/character/aoi-igawa`
- `/character/chisa-shiraishi`
- `/character/haruko-saeki`
上記URLのみクロール対象とする。
画像、動画は対象外にする。
それ以外のリンクはキューに追加しない。

### 実装方針
- articleタグの中を捜査する。
- navタグは無視する
- 通常テキストのほか、aria-label属性、alt属性、title属性も対象にする。
  - 1つのタグに含まれるテキストは1つの文脈としてまとめる。
    - 例：`<p class="details__specs__nameen" aria-label="ローマ字表記">AI KOMIYAMA</p>` → `ローマ字表記 AI KOMIYAMA`
  - 改行タグで区切らず句読点まで繋げる。
- リアルタイム収集ではなく、あらかじめデータを収集して蓄積しておく。


## フロントエンドについて

- ブラウザ画面右下に常駐するチャットボタンをクリックすると、チャットウィンドウがポップアップで開くようにする。
 - ボタン背景色は#1428FF
 - アイコンは白
- ポップアップの中は上にチャットログ、下にメッセージ入力エリアを作る。
  - 左側にbotのメッセージ、右側にユーザーが入力したメッセージを表示する。
  - メッセージの表示には吹き出しを使う。
  - 送信ボタンに公式カラー(#1428FF)を使用する
- 最初に質問のカテゴリーを選べるようにする。
  - キャラクター
  - ライブイベント
  - グッズ
  - 楽曲
  - 生放送
  - その他
- キャラクター名の表記揺れに対応する
例：小美山愛
1. ひらがな（こみやまあい）
2. ローマ字（KOMIYAMA AI、AI KOMIYAMA）
3. 誤字（小宮山）